{% extends 'base.html' %}
{% load mathfilters %}

{% block title %}Ubicación - Hotel Yunuen | Lázaro Cárdenas, Michoacán{% endblock %}

{% block extra_css %}
<style>
    .location-header {
        background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
        color: white;
        padding: 80px 0 40px;
        position: relative;
        overflow: hidden;
    }
    
    .location-header::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 20"><defs><radialGradient id="a" cx="50%" cy="0%" fx="50%" fy="0%" r="100%"><stop offset="0%" stop-color="%23ffffff" stop-opacity="0.1"/><stop offset="100%" stop-color="%23ffffff" stop-opacity="0"/></radialGradient></defs><ellipse fill="url(%23a)" cx="50" cy="0" rx="50" ry="20"/></svg>') repeat-x;
        opacity: 0.1;
    }
    
    .map-container {
        border-radius: 20px;
        overflow: hidden;
        box-shadow: 0 15px 35px rgba(0,0,0,0.1);
        height: 450px;
        background: #f8f9fa;
        position: relative;
    }
    
    .map-placeholder {
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        background: linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%);
        color: #6c757d;
    }
    
    .location-card {
        background: white;
        border-radius: 20px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        padding: 30px;
        margin-bottom: 30px;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        border: none;
    }
    
    .location-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 20px 40px rgba(0,0,0,0.15);
    }
    
    .attraction-card {
        background: white;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        transition: transform 0.3s ease;
        height: 100%;
        border: none;
    }
    
    .attraction-card:hover {
        transform: translateY(-8px);
    }
    
    .attraction-image {
        height: 200px;
        background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 3rem;
    }
    
    .attraction-image.beach {
        background: linear-gradient(135deg, #00b894 0%, #00a085 100%);
    }
    
    .attraction-image.port {
        background: linear-gradient(135deg, #636e72 0%, #2d3436 100%);
    }
    
    .attraction-image.tourist {
        background: linear-gradient(135deg, #fd79a8 0%, #e84393 100%);
    }
    
    .distance-badge {
        position: absolute;
        top: 15px;
        right: 15px;
        background: rgba(255,255,255,0.9);
        color: #333;
        padding: 5px 12px;
        border-radius: 15px;
        font-size: 0.85rem;
        font-weight: bold;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .contact-info-card {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-radius: 20px;
        padding: 30px;
        text-align: center;
        position: relative;
        overflow: hidden;
    }
    
    .contact-info-card::before {
        content: '';
        position: absolute;
        top: -50%;
        right: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
        animation: float 6s ease-in-out infinite;
    }
    
    @keyframes float {
        0%, 100% { transform: translateY(0px) rotate(0deg); }
        50% { transform: translateY(-20px) rotate(180deg); }
    }
    
    .transport-option {
        background: white;
        border-radius: 15px;
        padding: 20px;
        margin: 10px 0;
        box-shadow: 0 3px 15px rgba(0,0,0,0.1);
        transition: all 0.3s ease;
        border-left: 4px solid transparent;
    }
    
    .transport-option:hover {
        transform: translateX(10px);
        border-left-color: #007bff;
    }
    
    .weather-widget {
        background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
        color: white;
        border-radius: 20px;
        padding: 25px;
        text-align: center;
        position: relative;
        overflow: hidden;
    }
    
    .weather-widget::before {
        content: '';
        position: absolute;
        top: -10px;
        right: -10px;
        width: 100px;
        height: 100px;
        background: rgba(255,255,255,0.1);
        border-radius: 50%;
        animation: pulse 3s ease-in-out infinite;
    }
    
    @keyframes pulse {
        0%, 100% { transform: scale(1); opacity: 0.7; }
        50% { transform: scale(1.1); opacity: 0.3; }
    }
    
    .interactive-button {
        background: linear-gradient(135deg, #fd79a8 0%, #fdcb6e 100%);
        border: none;
        color: white;
        padding: 12px 25px;
        border-radius: 25px;
        font-weight: bold;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(253, 121, 168, 0.3);
    }
    
    .interactive-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(253, 121, 168, 0.4);
        color: white;
    }
    
    .direction-steps {
        background: #f8f9fa;
        border-radius: 15px;
        padding: 20px;
        margin: 15px 0;
    }
    
    .step-number {
        background: #007bff;
        color: white;
        border-radius: 50%;
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        margin-right: 15px;
    }
    
    .coordinate-info {
        background: rgba(0,0,0,0.8);
        color: white;
        padding: 10px 15px;
        border-radius: 10px;
        font-family: 'Courier New', monospace;
        font-size: 0.9rem;
    }
</style>
{% endblock %}

{% block content %}
<!-- Header -->
<section class="location-header text-center">
    <div class="container" data-aos="fade-up">
        <h1 class="display-4 fw-bold mb-3">
            <i class="fas fa-map-marker-alt me-3"></i>Nuestra Ubicación
        </h1>
        <p class="lead">
            Hotel Yunuen se encuentra en el corazón de Lázaro Cárdenas, Michoacán<br>
            con acceso privilegiado al puerto más importante del Pacífico Mexicano
        </p>
        <div class="mt-4">
            <span class="badge bg-warning text-dark fs-6 me-2">
                <i class="fas fa-anchor me-1"></i>A 2 km del Puerto
            </span>
            <span class="badge bg-success fs-6 me-2">
                <i class="fas fa-waves me-1"></i>15 min a Playa Azul
            </span>
            <span class="badge bg-info fs-6">
                <i class="fas fa-plane me-1"></i>45 min a Zihuatanejo
            </span>
        </div>
    </div>
</section>

<!-- Mapa y Información Principal -->
<section class="py-5">
    <div class="container">
        <div class="row g-4">
            <div class="col-lg-8" data-aos="fade-right">
                <div class="location-card">
                    <h3 class="mb-4">
                        <i class="fas fa-map text-primary me-2"></i>Encuentranos Aquí
                    </h3>
                    <div class="map-container">
                        <div class="map-placeholder">
                            <i class="fas fa-map-marked-alt fa-4x mb-3"></i>
                            <h4>Mapa Interactivo</h4>
                            <p class="mb-3">Avenida Principal, Lázaro Cárdenas, Michoacán</p>
                            <div class="coordinate-info mb-3">
                                <i class="fas fa-crosshairs me-2"></i>
                                Coordenadas: 18.0°N, 102.2°W
                            </div>
                            <button class="interactive-button" onclick="openMapsApp()">
                                <i class="fas fa-directions me-2"></i>Obtener Direcciones
                            </button>
                        </div>
                    </div>
                    <div class="mt-3 text-center">
                        <small class="text-muted">
                            <i class="fas fa-info-circle me-1"></i>
                            Haga clic en "Obtener Direcciones" para abrir su app de mapas preferida
                        </small>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4" data-aos="fade-left">
                <!-- Información de Contacto -->
                <div class="contact-info-card mb-4">
                    <h4 class="mb-3">
                        <i class="fas fa-hotel me-2"></i>Hotel Yunuen
                    </h4>
                    <div class="mb-3">
                        <i class="fas fa-map-marker-alt me-2"></i>
                        <strong>Dirección:</strong><br>
                        Avenida Principal<br>
                        Lázaro Cárdenas, Michoacán 60950<br>
                        México
                    </div>
                    <div class="mb-3">
                        <i class="fas fa-phone me-2"></i>
                        <strong>Teléfono:</strong><br>
                        <a href="tel:+527535320000" class="text-white">+52 753 532 0000</a>
                    </div>
                    <div class="mb-3">
                        <i class="fas fa-envelope me-2"></i>
                        <strong>Email:</strong><br>
                        <a href="mailto:info@hotelyunuen.com.mx" class="text-white">info@hotelyunuen.com.mx</a>
                    </div>
                    <div class="mt-4">
                        <a href="{% url 'contact' %}" class="btn btn-light btn-sm">
                            <i class="fas fa-paper-plane me-2"></i>Contactar Ahora
                        </a>
                    </div>
                </div>
                
                <!-- Widget del Clima -->
                <div class="weather-widget">
                    <h5 class="mb-3">
                        <i class="fas fa-sun me-2"></i>Clima en Lázaro Cárdenas
                    </h5>
                    <div class="row text-center">
                        <div class="col-6">
                            <div class="h3 mb-0">28°C</div>
                            <small>Promedio</small>
                        </div>
                        <div class="col-6">
                            <div class="h3 mb-0">☀️</div>
                            <small>Soleado</small>
                        </div>
                    </div>
                    <p class="mt-2 mb-0 small">
                        Clima cálido y agradable durante todo el año
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Atracciones Cercanas -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="text-center mb-5" data-aos="fade-up">
            <h2 class="fw-bold">Atracciones Cercanas</h2>
            <p class="lead text-muted">Descubra los destinos más populares desde Hotel Yunuen</p>
        </div>
        
        <div class="row g-4">
            {% for attraction in nearby_attractions %}
            <div class="col-lg-3 col-md-6" data-aos="fade-up" data-aos-delay="{{ forloop.counter0|mul:100 }}">
                <div class="attraction-card position-relative">
                    <div class="attraction-image {% if 'Playa' in attraction.name %}beach{% elif 'Puerto' in attraction.name %}port{% else %}tourist{% endif %}">
                        {% if 'Playa' in attraction.name %}
                        <i class="fas fa-umbrella-beach"></i>
                        {% elif 'Puerto' in attraction.name %}
                        <i class="fas fa-ship"></i>
                        {% else %}
                        <i class="fas fa-palm-tree"></i>
                        {% endif %}
                    </div>
                    <div class="distance-badge">{{ attraction.distance }}</div>
                    <div class="card-body p-3">
                        <h5 class="card-title">{{ attraction.name }}</h5>
                        <p class="card-text text-muted">{{ attraction.description }}</p>
                        <div class="d-flex justify-content-between align-items-center">
                            <small class="text-success">
                                <i class="fas fa-clock me-1"></i>
                                {% if 'km' in attraction.distance %}
                                    {% if '15' in attraction.distance %}20 min en auto{% else %}1 hora{% endif %}
                                {% else %}5 min caminando{% endif %}
                            </small>
                            <button class="btn btn-sm btn-outline-primary" onclick="getDirections('{{ attraction.name }}')">
                                <i class="fas fa-route"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
            
            <!-- Atracciones adicionales -->
            <div class="col-lg-3 col-md-6" data-aos="fade-up" data-aos-delay="400">
                <div class="attraction-card position-relative">
                    <div class="attraction-image beach">
                        <i class="fas fa-swimmer"></i>
                    </div>
                    <div class="distance-badge">8 km</div>
                    <div class="card-body p-3">
                        <h5 class="card-title">Playa La Villita</h5>
                        <p class="card-text text-muted">Playa tranquila perfecta para relajarse y disfrutar del atardecer</p>
                        <div class="d-flex justify-content-between align-items-center">
                            <small class="text-success">
                                <i class="fas fa-clock me-1"></i>15 min en auto
                            </small>
                            <button class="btn btn-sm btn-outline-primary" onclick="getDirections('Playa La Villita')">
                                <i class="fas fa-route"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Cómo Llegar -->
<section class="py-5">
    <div class="container">
        <div class="text-center mb-5" data-aos="fade-up">
            <h2 class="fw-bold">¿Cómo Llegar?</h2>
            <p class="lead text-muted">Opciones de transporte para llegar a Hotel Yunuen</p>
        </div>
        
        <div class="row g-4">
            <div class="col-md-6" data-aos="fade-right">
                <h4 class="mb-4">
                    <i class="fas fa-car text-primary me-2"></i>En Automóvil
                </h4>
                <div class="direction-steps">
                    <div class="d-flex align-items-start mb-3">
                        <span class="step-number">1</span>
                        <div>
                            <strong>Desde Ciudad de México:</strong><br>
                            <small class="text-muted">Tome la Autopista del Sol (95D) hacia Acapulco, luego la carretera 200 hacia Lázaro Cárdenas (8 horas aprox.)</small>
                        </div>
                    </div>
                    <div class="d-flex align-items-start mb-3">
                        <span class="step-number">2</span>
                        <div>
                            <strong>Desde Guadalajara:</strong><br>
                            <small class="text-muted">Tome la carretera 15D hacia Morelia, luego la 37 hacia Lázaro Cárdenas (6 horas aprox.)</small>
                        </div>
                    </div>
                    <div class="d-flex align-items-start">
                        <span class="step-number">3</span>
                        <div>
                            <strong>Al llegar a la ciudad:</strong><br>
                            <small class="text-muted">Busque la Avenida Principal, el hotel se encuentra en una ubicación céntrica y fácil de identificar</small>
                        </div>
                    </div>
                </div>
                
                <div class="transport-option">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-parking text-success fa-2x me-3"></i>
                        <div>
                            <strong>Estacionamiento Gratuito</strong><br>
                            <small class="text-muted">Amplio estacionamiento seguro para huéspedes</small>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6" data-aos="fade-left">
                <h4 class="mb-4">
                    <i class="fas fa-plane text-info me-2"></i>Transporte Público y Aéreo
                </h4>
                
                <div class="transport-option">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-plane text-info fa-2x me-3"></i>
                        <div>
                            <strong>Aeropuerto Ixtapa-Zihuatanejo</strong><br>
                            <small class="text-muted">45 min en auto - Servicio de traslados disponible</small>
                        </div>
                    </div>
                </div>
                
                <div class="transport-option">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-bus text-warning fa-2x me-3"></i>
                        <div>
                            <strong>Terminal de Autobuses</strong><br>
                            <small class="text-muted">5 min del hotel - Conexiones a toda la República</small>
                        </div>
                    </div>
                </div>
                
                <div class="transport-option">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-taxi text-danger fa-2x me-3"></i>
                        <div>
                            <strong>Taxi y Uber</strong><br>
                            <small class="text-muted">Disponibles 24/7 - Tarifas preferenciales para huéspedes</small>
                        </div>
                    </div>
                </div>
                
                <div class="transport-option">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-shuttle-van text-success fa-2x me-3"></i>
                        <div>
                            <strong>Servicio de Traslados</strong><br>
                            <small class="text-muted">Consulte disponibilidad al hacer su reserva</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Ventajas de la Ubicación -->
<section class="py-5 bg-primary text-white">
    <div class="container">
        <div class="text-center mb-5" data-aos="fade-up">
            <h2 class="fw-bold">Ventajas de Nuestra Ubicación</h2>
            <p class="lead">Por qué elegir Hotel Yunuen en Lázaro Cárdenas</p>
        </div>
        
        <div class="row g-4">
            <div class="col-lg-3 col-md-6 text-center" data-aos="fade-up" data-aos-delay="100">
                <i class="fas fa-anchor fa-3x mb-3 text-warning"></i>
                <h5>Puerto Industrial</h5>
                <p class="small">Ideal para viajeros de negocios con acceso directo al puerto más importante del Pacífico</p>
            </div>
            <div class="col-lg-3 col-md-6 text-center" data-aos="fade-up" data-aos-delay="200">
                <i class="fas fa-umbrella-beach fa-3x mb-3 text-warning"></i>
                <h5>Cerca de Playas</h5>
                <p class="small">A minutos de las mejores playas michoacanas como Playa Azul y La Villita</p>
            </div>
            <div class="col-lg-3 col-md-6 text-center" data-aos="fade-up" data-aos-delay="300">
                <i class="fas fa-utensils fa-3x mb-3 text-warning"></i>
                <h5>Gastronomía Local</h5>
                <p class="small">Rodeado de los mejores restaurantes de mariscos y cocina michoacana</p>
            </div>
            <div class="col-lg-3 col-md-6 text-center" data-aos="fade-up" data-aos-delay="400">
                <i class="fas fa-route fa-3x mb-3 text-warning"></i>
                <h5>Conexiones</h5>
                <p class="small">Fácil acceso a destinos turísticos como Zihuatanejo, Ixtapa y Acapulco</p>
            </div>
        </div>
    </div>
</section>

<!-- Call to Action -->
<section class="py-5 bg-light text-center">
    <div class="container" data-aos="fade-up">
        <h3 class="fw-bold mb-3">¿Listo para Visitarnos?</h3>
        <p class="lead mb-4">
            Reserve ahora y disfrute de la mejor ubicación en Lázaro Cárdenas
        </p>
        <div class="d-flex flex-wrap justify-content-center gap-3">
            <a href="{% url 'bookings:booking_create' %}" class="btn btn-primary btn-lg px-5">
                <i class="fas fa-calendar-check me-2"></i>Reservar Ahora
            </a>
            <a href="{% url 'contact' %}" class="btn btn-outline-primary btn-lg px-5">
                <i class="fas fa-map-marked-alt me-2"></i>Más Información
            </a>
            <button class="btn btn-success btn-lg px-5" onclick="openMapsApp()">
                <i class="fas fa-directions me-2"></i>Obtener Direcciones
            </button>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
$(document).ready(function() {
    // Initialize location features
    initializeLocationFeatures();
    
    // Add smooth scrolling for internal links
    $('a[href^="#"]').on('click', function(e) {
        e.preventDefault();
        const target = $($(this).attr('href'));
        if (target.length) {
            $('html, body').animate({
                scrollTop: target.offset().top - 100
            }, 500);
        }
    });
    
    // Add hover effects to attraction cards
    $('.attraction-card').hover(
        function() {
            $(this).find('.btn').addClass('btn-primary').removeClass('btn-outline-primary');
        },
        function() {
            $(this).find('.btn').removeClass('btn-primary').addClass('btn-outline-primary');
        }
    );
    
    // Transport option click tracking
    $('.transport-option').on('click', function() {
        const transportType = $(this).find('strong').text();
        console.log('Usuario interesado en: ' + transportType);
        // Here you could add analytics tracking
    });
});

function initializeLocationFeatures() {
    // Set hotel coordinates
    window.hotelLocation = {
        lat: 17.9588,
        lng: -102.2004,
        name: 'Hotel Yunuen',
        address: 'Avenida Principal, Lázaro Cárdenas, Michoacán'
    };
    
    // Add click handler for map placeholder
    $('.map-placeholder').on('click', function() {
        openMapsApp();
    });
}

function openMapsApp() {
    const location = window.hotelLocation;
    const query = encodeURIComponent(`${location.name}, ${location.address}`);
    
    // Try different map applications
    const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
    const isAndroid = /Android/.test(navigator.userAgent);
    
    let mapUrl;
    
    if (isIOS) {
        // Try Apple Maps first, fallback to Google Maps
        mapUrl = `maps://maps.google.com/maps?daddr=${location.lat},${location.lng}&amp;ll=`;
        // Alternative: mapUrl = `http://maps.apple.com/?q=${query}`;
    } else if (isAndroid) {
        mapUrl = `geo:${location.lat},${location.lng}?q=${query}`;
    } else {
        // Desktop - open Google Maps
        mapUrl = `https://www.google.com/maps/search/?api=1&query=${query}`;
    }
    
    // Try to open the map app
    const mapWindow = window.open(mapUrl, '_blank');
    
    // Fallback to Google Maps if native app fails
    setTimeout(function() {
        if (!mapWindow || mapWindow.closed) {
            window.open(`https://www.google.com/maps/search/?api=1&query=${query}`, '_blank');
        }
    }, 1000);
    
    // Show feedback to user
    showNotification('Abriendo aplicación de mapas...', 'info');
}

function getDirections(destination) {
    const hotelCoords = `${window.hotelLocation.lat},${window.hotelLocation.lng}`;
    const destQuery = encodeURIComponent(destination);
    const mapsUrl = `https://www.google.com/maps/dir/${hotelCoords}/${destQuery}`;
    
    window.open(mapsUrl, '_blank');
    showNotification(`Obteniendo direcciones a ${destination}`, 'success');
}

function showNotification(message, type = 'info') {
    // Create notification element
    const notification = $(`
        <div class="alert alert-${type === 'info' ? 'info' : type === 'success' ? 'success' : 'primary'} alert-dismissible fade show position-fixed" 
             style="top: 100px; right: 20px; z-index: 9999; max-width: 300px;">
            <i class="fas fa-${type === 'info' ? 'info-circle' : type === 'success' ? 'check-circle' : 'map'} me-2"></i>
            ${message}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    `);
    
    // Add to body and auto-remove after 3 seconds
    $('body').append(notification);
    setTimeout(() => {
        notification.alert('close');
    }, 3000);
}

// Add some interactive features
$(document).ready(function() {
    // Weather widget click for more details
    $('.weather-widget').on('click', function() {
        showNotification('El clima en Lázaro Cárdenas es cálido y agradable durante todo el año', 'info');
    });
    
    // Contact info click to copy
    $('.contact-info-card a[href^="tel:"]').on('click', function(e) {
        if (navigator.clipboard) {
            const phone = $(this).text();
            navigator.clipboard.writeText(phone);
            showNotification('Número copiado al portapapeles', 'success');
        }
    });
    
    $('.contact-info-card a[href^="mailto:"]').on('click', function(e) {
        if (navigator.clipboard) {
            const email = $(this).text();
            navigator.clipboard.writeText(email);
            showNotification('Email copiado al portapapeles', 'success');
        }
    });
});

// Initialize Google Maps if API key is available
function initMap() {
    if (typeof google !== 'undefined') {
        const hotelLocation = { lat: 17.9588, lng: -102.2004 };
        const map = new google.maps.Map(document.querySelector('.map-container'), {
            zoom: 15,
            center: hotelLocation,
        });
        
        const marker = new google.maps.Marker({
            position: hotelLocation,
            map: map,
            title: 'Hotel Yunuen',
        });
        
        // Replace placeholder content
        $('.map-placeholder').html('');
    }
}

// Load Google Maps API if needed
// Note: Add your API key and uncomment the following line if you want to use real Google Maps
// const script = document.createElement('script');
// script.src = 'https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap';
// document.head.appendChild(script);
</script>
{% endblock %}